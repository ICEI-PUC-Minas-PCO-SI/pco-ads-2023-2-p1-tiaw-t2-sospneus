<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>S.O.S. Pneus</title>
</head>

<body style="display: flex; flex-direction: column; justify-content: space-between; min-height: 100vh; margin: 0;">

<header class="header">
    <img src="Img/img_SOS.jpg" class="logo" alt="Logo" />
    <h1>Home Cliente</h1>
    <a class="btn btn-primary m-3" href="#" role="button">Home</a>
    <button class="btn btn-primary m-3">Histórico</button>
    <input class="btn btn-primary m-3" type="button" value="Notificações" />
</header>

<div class="container mt-4" style="flex: 2; display: flex; justify-content: center; align-items: center;">
    <div class="outer-chat-box border-2">
        <div class="inner-chat-box">
            <textarea class="form-control message-input border-2" placeholder="Digite sua mensagem"></textarea>
        </div>
        <div class="send-button">
            <button class="btn btn-primary" id="encerrarAtendimento">Encerrar</button>
        </div>

        
        <table class="table mt-3">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Mensagem</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody id="messageTableBody"></tbody>
        </table>
    </div>
</div>

<footer class="bg-dark text-light text-center py-2">
    <p>&copy; 2023 S.O.S. Pneus. Todos os direitos reservados.</p>
</footer>

<script>
    
    function addMessageToTable(id, message) {
        var tableBody = document.getElementById('messageTableBody');
        var row = tableBody.insertRow();
        row.innerHTML = '<td>' + id + '</td><td>' + message + '</td><td><button class="btn btn-danger btn-sm" onclick="deleteMessage(' + id + ')">Excluir</button></td>';
    }

    
    function deleteMessage(id) {
        var confirmation = confirm('Tem certeza que deseja excluir esta mensagem?');
        if (confirmation) {
            
            var tableBody = document.getElementById('messageTableBody');
            var rowIndex = Array.from(tableBody.children).findIndex(row => row.firstChild.textContent == id);
            tableBody.deleteRow(rowIndex);
        }
    }

    document.getElementById('encerrarAtendimento').addEventListener('click', function() {
        var messageInput = document.querySelector('.message-input');
        var message = messageInput.value.trim();

        if (message !== '') {
           
            var messageId = Date.now(); 

           
            addMessageToTable(messageId, message);

            
            messageInput.value = '';
        }

        var confirmation = confirm('Tem certeza que deseja encerrar o atendimento?');
        if (!confirmation) {
            alert('O atendimento continuará em aberto...');
        } else {
            var secondConfirmation = confirm('Atendimento encerrado com sucesso!');
            if (secondConfirmation) {
                var thirdConfirmation = confirm('Deseja realizar uma avaliação?');
                if (thirdConfirmation) {
                   
                    window.location.href = 'preencher com a pagina';
                }
            }
        }
    });
</script>

</body>

</html>
